# confluent-kafka C extension — Kafka I/O via librdkafka.
# librdkafka is statically linked into confluent_kafka.cimpl.
# It performs ALL network I/O in C: socket creation, connect, send/recv,
# TLS (OpenSSL), SASL auth, DNS, and event polling.
# None of this flows through Python's _socket, _ssl, or select.
#
# Strategy: proxy at the cimpl C extension boundary. All I/O flows
# through Producer/Consumer/_AdminClientImpl types.
#
# Deterministic functions (no entry needed):
#   version, libversion           — compiled-in constants
#   murmur2, consistent, fnv1a    — pure hash computation
# All integer constants (OFFSET_*, TIMESTAMP_*, ACL_*, etc.) are deterministic.

package = "confluent-kafka"

proxy = [
    # --- Core I/O types ---
    "Producer",             # Client producer: produce, poll, flush, purge,
                            #   begin_transaction, commit_transaction, abort_transaction,
                            #   init_transactions, send_offsets_to_transaction,
                            #   list_topics, set_sasl_credentials
    "Consumer",             # Client consumer: subscribe, unsubscribe, poll, consume,
                            #   assign, unassign, assignment, commit, get_watermark_offsets,
                            #   pause, resume, seek, position, store_offsets, committed,
                            #   close, list_topics, offsets_for_times, incremental_assign,
                            #   incremental_unassign, consumer_group_metadata, memberid,
                            #   set_sasl_credentials
    "_AdminClientImpl",     # Admin client: create_topics, delete_topics, create_partitions,
                            #   describe_topics, describe_cluster, list_topics, list_groups,
                            #   describe_consumer_groups, list_consumer_groups,
                            #   list_consumer_group_offsets, alter_consumer_group_offsets,
                            #   delete_consumer_groups, create_acls, describe_acls, delete_acls,
                            #   describe_configs, alter_configs, incremental_alter_configs,
                            #   list_offsets, delete_records, elect_leaders, poll,
                            #   set_sasl_credentials
]

immutable = [
    # --- Exception types (picklable via __reduce__, no I/O) ---
    "KafkaError",           # Error/event object: code, name, str, fatal, retriable, txn_requires_abort
    "KafkaException",       # Python Exception wrapper around KafkaError

    # --- Data carrier types (picklable, no I/O methods) ---
    "Message",              # Consumed/produced message: topic, partition, offset, key, value,
                            #   headers, error, timestamp, latency, leader_epoch
    "TopicPartition",       # Topic-partition descriptor: topic, partition, offset, metadata,
                            #   leader_epoch, error
    "Uuid",                 # UUID: most_significant_bits, least_significant_bits

    # --- Admin data types (picklable, no I/O methods) ---
    "NewTopic",             # Topic creation spec: topic, num_partitions, replication_factor,
                            #   replica_assignment, config
    "NewPartitions",        # Partition increase spec: topic, new_total_count, replica_assignment
]
